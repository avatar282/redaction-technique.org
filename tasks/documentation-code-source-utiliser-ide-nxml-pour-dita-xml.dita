<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN"
"/usr/share/dita-ot/dtd/technicalContent/dtd/task.dtd">
<task id="utiliser-lide-nxml-pour-dita-xml" xml:lang="fr-fr">
  <title>Utiliser l'IDE nXML pour DITA XML</title>
  <taskbody>
    <prereq>
      <ul>
        <li>
          Emacs
        </li>
        <li>
          La structure de répertoires de votre projet de documentation DITA XML
          doit être la suivante&#160;:
          <ul>
            <li>
              répertoire de langue
              <ul>
                <li>
                  concepts
                </li>
                <li>
                  <p>
                    faq
                  </p>
                </li>
                <li>
                  <p>
                    reference
                  </p>
                </li>
                <li>
                  <p>
                    tasks
                  </p>
                </li>
                <li>
                  <p>
                    topics
                  </p>
                </li>
              </ul>
            </li>
          </ul>
          <p>
            où <i>&lt;répertoire de langue&gt;</i> a la valeur
            <i>en_US</i>, ou <i>fr_FR</i>, etc.
          </p>
        </li>
        <li>
          <p>
            Les instructions de ligne de commande sont conçues pour GNU/Linux&#160;;
            elles doivent être adaptées pour être utilisées dans un autre
            environnement.
          </p>
        </li>
      </ul>
    </prereq>
    <context>
      <p>
        Le mode <i>nXML</i> propose de valider en temps réel les documents XML
        DocBook, XHTML ou autres. Plus la peine de connaître le schéma XML par
        cœur&#160;: votre éditeur de texte vous propose l'autocomplétion des
        balises XML selon le contexte. Il ne supporte cependant pas DITA XML
        par défaut. Ce didacticiel vous permettra d'utiliser ce mode Emacs pour
        DITA XML.
      </p>
    </context>
    <steps>
      <step>
        <cmd>
          Effectuez une sauvegarde de l'ensemble de votre projet de
          documentation DITA XML.
        </cmd>
      </step>
      <step>
        <cmd>
          Ouvrez un terminal et collez la suite de commandes suivante&#160;:
        </cmd>
        <info>
          <codeblock>
            $ cd &amp;&amp; \
            wget http://www.thaiopensource.com/download/nxml-mode-20041004.tar.gz &amp;&amp; \
            tar xzvf nxml-mode-20041004.tar.gz &amp;&amp; \
            wget http://www.redaction-technique.org/media/nxml-mode-environmment.txt &amp;&amp; \
            cp .emacs .emacs.bak &amp;&amp; \
            cat .emacs | sed '$a\' &gt; .emacs.tmp &amp;&amp; \
            mv .emacs.tmp .emacs &amp;&amp; \
            cat nxml-mode-environmment.txt &gt;&gt; .emacs &amp;&amp; \
            rm  nxml-mode-environmment.txt
          </codeblock>
          <note>
            <p>
              Si un message vous avertit que le fichier <filepath>.emacs</filepath> n'existe pas,
              collez les commandes suivantes, puis recommencez l'opération&#160;:
            </p>
            <codeblock>
              $ cd &amp;&amp; touch .emacs
            </codeblock>
          </note>
          <p>
            Cette suite de commandes&#160;:
          </p>
          <ul>
            <li>
              télécharge et décompresse le mode nXML,
            </li>
            <li>
              crée une copie de sauvegarde du fichier <filepath>.emacs</filepath> (<filepath>.emacs.bak</filepath>),
            </li>
            <li>
              écrit les variables d'environnement du mode nXML dans le fichier
              <filepath>.emacs</filepath>.
            </li>
          </ul>
        </info>
      </step>
      <step>
        <cmd>
          Téléchargez <xref format="html" scope="external"
          href="http://www.redaction-technique.org/media/rnc.tar.gz">l'archive
          des schémas RelaxNG pour DITA XML</xref> dans le répertoire racine de
          votre projet de documentation DITA XML.
        </cmd>
      </step>
      <step>
        <cmd>
          Placez-vous dans le répertoire racine de votre projet de documentation
          DITA XML, puis collez la commande suivante&#160;:
        </cmd>
        <info>
          <codeblock>
            $ tar xzvf rnc.tar.gz
          </codeblock>
          Cette commande crée un répertoire rnc de même niveau que le
          <i>&lt;répertoire de langue&gt;</i>.
        </info>
      </step>
      <step>
        <cmd>
          Téléchargez <xref format="html" scope="external"
          href="http://www.redaction-technique.org/media/schemas.redaction-technique.org.tar.gz">l'archive
          des fichiers <filepath>schemas.xml</filepath></xref> dans le répertoire racine de votre
          projet de documentation DITA XML, puis collez la suite de commandes
          ci-dessous en remplaçant <i>&lt;répertoire de langue&gt;</i> par la
          valeur appropriée, <i>en_US</i>, ou <i>fr_FR</i>, par exemple. Répétez
          cette étape pour tous vos répertoires de langue.
        </cmd>
        <info>
          <codeblock>
            $ tar xzvf schemas.redaction-technique.org.tar.gz &amp;&amp; \
            cd &lt;répertoire de langue&gt; &amp;&amp; \
            cp ../schemas.redaction-technique.org/concepts/schemas.xml concepts/ &amp;&amp; \
            cp ../schemas.redaction-technique.org/faq/schemas.xml faq/ &amp;&amp; \
            cp ../schemas.redaction-technique.org/reference/schemas.xml reference/ &amp;&amp; \
            cp ../schemas.redaction-technique.org/tasks/schemas.xml tasks/ &amp;&amp; \
            cp ../schemas.redaction-technique.org/tasks/schemas.xml tasks/ &amp;&amp; \
            cp ../schemas.redaction-technique.org/topics/schemas.xml topics/ &amp;&amp; \
            rm -rf ../schemas.redaction-technique.org/
          </codeblock>
          <p>
            Vos répertoires de langue doivent maintenant comporter les fichiers
            <filepath>schemas.xml</filepath> appropriés&#160;:
          </p>
          <ul>
            <li>
              fr_FR
              <ul>
                <li>
                  concepts
                  <ul>
                    <li>
                      schemas.xml
                    </li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li>
                  faq
                  <ul>
                    <li>
                      schemas.xml
                    </li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li>
                  reference
                  <ul>
                    <li>
                      schemas.xml
                    </li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li>
                  tasks
                  <ul>
                    <li>
                      schemas.xml
                    </li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li>
                  topics
                  <ul>
                    <li>
                      schemas.xml
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </info>
      </step>
      <step>
        <cmd>
          Ouvrez un fichier de contenu DITA XML (.dita) avec Emacs. La syntaxe
          DITA XML apparaît en couleurs. Les endroits où le schéma n'est pas
          respecté sont soulignés en rouge.
        </cmd>
      </step>
      <step>
        <cmd>
          Pour insérer une nouvelle balise entrez &lt;, puis appuyez sur
          Ctrl+Entrée. La liste des balises possibles apparaît.
        </cmd>
      </step>
      <step>
        <cmd>
          Sélectionnez une balise, puis appuyez sur Entrée. Appuyez sur
          Ctrl+Entrée pour afficher la liste des attributs autorisés.
        </cmd>
      </step>
      <step>
        <cmd>
          Pour insérer une balise fermante après du texte, entrez &lt;/, puis
          appuyez sur Ctrl+Entrée.
        </cmd>
      </step>
    </steps>
  </taskbody>
</task>
